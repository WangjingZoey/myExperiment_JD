package community;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.util.ArrayList;
import java.util.List;

import jxl.Cell;
import jxl.Sheet;
import jxl.Workbook;
import nlp.lda.com.FileUtil;
import nlp.lda.main.Sim2Vec;
import entity.Relation;
import entity.Service;
import entity.Sets;

public class FindCommunity {
	public static int[][] CM = new int[808][300];
//	public static String[][] Test = {{}};
	public static int[][] TestID = new int[33][15];
	public static void main(String[] args)
	{
		//获取服务实体
		getSRCEntity();
		getIK();
		getEdge();
		

//		getMashupTXTS();
//		getCommunity();
		
		
		
		//从文本中读现存边
//		getIK();
		
		//获取现存边
//		getEdge();
		
//		String[][] Test = {{"0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.5202702879905701	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.14189189672470093	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	"
//			,"0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.4797297418117523	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.06081081181764603	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.11486486345529556	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	"
//			,"0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.4797297418117523	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.03378378227353096	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.15540540218353271	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	"
//			,"0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.4797297418117523	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.14189189672470093	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	"
//			,"0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.5067567825317383	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.020270269364118576	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.14189189672470093	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	0.006756756920367479	"
//		},{"0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.843406617641449	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	"
//			,"0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.7181817889213562	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.00909090880304575	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.00909090880304575	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.00909090880304575	0.0030303029343485832	0.0030303029343485832	0.00909090880304575	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.11212120950222015	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	"
//			,"0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.848901093006134	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	"
//			,"0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.7121211886405945	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.01515151560306549	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.00909090880304575	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.00909090880304575	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.00909090880304575	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	0.10606060922145844	0.00909090880304575	0.0030303029343485832	0.0030303029343485832	0.0030303029343485832	"
//			,"0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.843406617641449	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.002747252816334367	0.008241758681833744	0.002747252816334367	0.002747252816334367	0.002747252816334367	"
//		},{"0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.04411764815449715	0.014705882407724857	0.014705882407724857	0.07352941483259201	0.10294117778539658	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.04411764815449715	0.014705882407724857	0.014705882407724857	0.04411764815449715	0.014705882407724857	0.04411764815449715	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	"
//			,"0.009259259328246117	0.009259259328246117	0.009259259328246117	0.02777777798473835	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.02777777798473835	0.4722222089767456	0.009259259328246117	0.02777777798473835	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.02777777798473835	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	"
//			,"0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.5277777910232544	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.02777777798473835	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	"
//			,"0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.03191489353775978	0.010638297535479069	0.010638297535479069	0.457446813583374	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	0.010638297535479069	"
//			,"0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.04411764815449715	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.1617647111415863	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.04411764815449715	0.014705882407724857	0.04411764815449715	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.04411764815449715	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	0.014705882407724857	"
//		},{"0.007575757801532745	0.007575757801532745	0.03787878900766373	0.007575757801532745	0.007575757801532745	0.022727273404598236	0.05303030461072922	0.03787878900766373	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.4318181872367859	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.03787878900766373	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.022727273404598236	0.007575757801532745	0.022727273404598236	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.022727273404598236	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	0.007575757801532745	"
//			,"0.035211268812417984	0.035211268812417984	0.007042253389954567	0.007042253389954567	0.035211268812417984	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.0211267601698637	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.4154929518699646	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.035211268812417984	0.007042253389954567	0.035211268812417984	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.007042253389954567	0.07746478915214539	0.007042253389954567	0.0211267601698637	0.007042253389954567	0.007042253389954567	"
//			,"0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.05147058889269829	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.5073529481887817	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.036764707416296005	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	"
//			,"0.007352941203862429	0.022058824077248573	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.49264705181121826	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	"
//			,"0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.4779411852359772	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.022058824077248573	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.007352941203862429	0.036764707416296005	0.036764707416296005	0.022058824077248573	0.007352941203862429	0.007352941203862429	"
//		},{"0.008620689623057842	0.0258620698004961	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.0258620698004961	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.0258620698004961	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.4396551847457886	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.07758620381355286	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.008620689623057842	0.0258620698004961	"
//			,"0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.011278195306658745	0.003759398590773344	0.003759398590773344	0.011278195306658745	0.003759398590773344	0.011278195306658745	0.01879699155688286	0.011278195306658745	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.011278195306658745	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.6729323267936707	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.02631578966975212	0.003759398590773344	0.003759398590773344	0.003759398590773344	0.06390977650880814	0.003759398590773344	0.011278195306658745	0.003759398590773344	0.003759398590773344	"
//			,"0.006329114083200693	0.006329114083200693	0.018987340852618217	0.006329114083200693	0.018987340852618217	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.2848101258277893	0.006329114083200693	0.006329114083200693	0.018987340852618217	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.32278481125831604	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.0569620244204998	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	"
//			,"0.006329114083200693	0.006329114083200693	0.018987340852618217	0.006329114083200693	0.018987340852618217	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.018987340852618217	0.006329114083200693	0.006329114083200693	0.03164556995034218	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.2848101258277893	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.31012657284736633	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.018987340852618217	0.03164556995034218	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	0.006329114083200693	"
//			,"0.009259259328246117	0.009259259328246117	0.046296294778585434	0.009259259328246117	0.009259259328246117	0.02777777798473835	0.009259259328246117	0.02777777798473835	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.02777777798473835	0.10185185074806213	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.32407405972480774	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.02777777798473835	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.009259259328246117	0.02777777798473835	"
//
//		}};
//		
//		for(int i = 0; i<5; i++)
//		{
//			long start = System.currentTimeMillis();
//			for(int j = 0; j<Test[i].length; j++)
//			{
//				TestID[i][j] = getSID(Test[i][j]);
//				
//			}
//			long end = System.currentTimeMillis();
//			System.out.println("程序运行时间："+(end-start)+"ms");
//		}
//		
//		//要测试的程序或方法
//		
//		
//		System.out.println("66666666666");
//		for(int i = 0; i<5; i++)
//		{
//			for(int j = 0; j<Test[i].length; j++)
//			{
//				System.out.println(i+": "+TestID[i][j]);
//			}
//		}
		
	}
	
	public static void getCommunity()
	{
		try {
			File file = new File("C:/Users/DJ/Desktop/data1121/community/community150.xls"); // 创建文件对象
	        Workbook wb = Workbook.getWorkbook(file); // 从文件流中获取Excel工作区对象（WorkBook）
	        Sheet sheet = wb.getSheet(0); // 从工作区中取得页（Sheet） 
	        int k = 0;
	        for(int j = 0; j<808; j++)
	        {
	        	k = 0;
	        	for (int i = 0; i < sheet.getRows(); i++) { // 循环打印Excel表中的内容 
		        	Cell cell = sheet.getCell(1, i);
		        	Cell cell2 = sheet.getCell(0, i);
		        	if(Integer.parseInt(cell.getContents())==j)
		        	{
		        		System.out.println(Integer.parseInt(cell2.getContents()));
		        		CM[j][k]=Integer.parseInt(cell2.getContents());
		        		k++;
		        		System.out.println("111111111111");
		        	}
		        	else
		        	{
		        		continue;
		        	}
	             }
	        	
        		System.out.println("22222");
	        }
	        
	        
//	        for(int i = 0;i<CM.size();i++)
//	        {
//	        	for(int j =0;j<CM.get(i).size();j++)
//	        	{
//	        		System.out.println(i+" :"+CM.get(i).get(j)+"\r\n"); 
//	        	}
//	        }
	         
	        
		}catch (Exception e) {
            e.printStackTrace();
        }
		
	}
	
	public static int getSID(String s)
	{
		Service ss = new Service();
		double sim = 0;
		int cmid = 0;
		int sid = 0;
		for(int i = 0; i<808; i++)//hai
		{
			ss = Service.getSrcUsId(CM[i][0]);
			Sim2Vec t2 =new Sim2Vec(s,ss.getDes());
			if(t2.sim()>sim)
			{
				sim = t2.sim();
				cmid = i;
				sid = CM[i][0];
			}
		}
		for(int j = 1; j<CM[cmid].length;j++)
		{
			if(CM[cmid][j]!=0)
			{
				ss = Service.getSrcUsId(CM[cmid][j]);
				Sim2Vec t3 =new Sim2Vec(s,ss.getDes());
				if(t3.sim()>sim)
				{
					sim = t3.sim();
					sid = CM[cmid][j];
				}
			}
			else
			{
				continue;
			}
			
		}
		return sid;
	}
	
	//根据src.txt和mashup.txt
		public static void getSRCEntity()
		{
			// 初始结点集合
			List<String> dscStrings = new ArrayList<String>();
			// 读取目标文件，获取点的信息，生成点的集合
			dscStrings = FileUtil.readFileByLines("C:/Users/DJ/Desktop/data1121/test-topicnum/SrcWk50.txt");
//			List<Service> src = new ArrayList<Service>();
			for (String tmp : dscStrings) 
			{
				String[] pntArray = tmp.split(",");// 将字符串按逗号分割
				// 将数组中0,1位赋值给点的x,y
				Service s = new Service(Integer.parseInt(pntArray[0]), Integer.parseInt(pntArray[1]),
						Double.parseDouble(pntArray[2]), pntArray[3],Integer.parseInt(pntArray[4]),
						Double.parseDouble(pntArray[5]),Double.parseDouble(pntArray[6]));
				Sets.iniSrc.add(s);
				System.out.println("src done"+s.getSrcid()+"\n");
			}

		}
	//mashup
		public static void getMashupTXTS()
		{
			try {
	            File file = new File("C:/Users/DJ/Desktop/data1121/service/wk.xls"); // 创建文件对象
	            Workbook wb = Workbook.getWorkbook(file); // 从文件流中获取Excel工作区对象（WorkBook）
	            Sheet sheet = wb.getSheet(0); // 从工作区中取得页（Sheet） 
	            
	            for (int i = 0; i < sheet.getRows(); i++) { // 循环打印Excel表中的内容 
	            	BufferedWriter writer1 = new BufferedWriter(
							new FileWriter(new File("C:/Users/DJ/Desktop/data1121/service/wktp/"+(i+1)+".txt")));
	            	for (int j = 0; j < sheet.getColumns(); j++) { 
	                    Cell cell = sheet.getCell(j, i); 
	                    writer1.write(cell.getContents());
	                    if(j != sheet.getColumns()-1)
	                    {
	                    	writer1.write(",");
	                    }
	                } 
	                
	                System.out.println(); 
	                writer1.close();
	            } 
	            
	        } catch (Exception e) {
	            e.printStackTrace();
	        }
		}
		

		//生成现有边
		public static void getEdge()
		{
			int rid = 0;
			for(int i = 0; i < Sets.iniSrc.size(); i++)
			{
				for(int j = i+1; j<Sets.iniSrc.size(); j++)
				{
					if(Sets.iniSrc.get(i).getSrcid()==Sets.iniSrc.get(j).getSrcid())
						continue;
					else
					{
						Sim2Vec t =new Sim2Vec(Sets.iniSrc.get(i).getDes(),Sets.iniSrc.get(j).getDes());
						double sim = t.sim();
						double ct = getCT(Sets.iniSrc.get(i).getSt(),Sets.iniSrc.get(j).getSt());
						double wgt=0;
						if((Relation.isIN(Sets.iniSrc.get(i).getSrcid(),Sets.iniSrc.get(j).getSrcid())||((Sets.iniSrc.get(i).getDpid() == Sets.iniSrc.get(j).getDpid())
								|| Relation.isFR(Sets.iniSrc.get(i).getSrcid(),Sets.iniSrc.get(j).getSrcid()))))
						{
							if(Relation.isIN(Sets.iniSrc.get(i).getSrcid(),Sets.iniSrc.get(j).getSrcid()))
							{
								wgt = ((sim + Sets.iniSrc.get(i).getCrd()*Sets.iniSrc.get(j).getCrd())
											 - ct*Sets.iniSrc.get(i).getCrd()*Sets.iniSrc.get(j).getCrd()/100000);
							}
							else
							{
								wgt = ((sim + Sets.iniSrc.get(i).getCrd()*Sets.iniSrc.get(j).getCrd())
										 - ct*Sets.iniSrc.get(i).getCrd()*Sets.iniSrc.get(j).getCrd()/100000)/50;
							}
								
							
//							wgt = sim + s1.getCrd()*s2.getCrd();
							wgt = 46-wgt;
							Relation r = new Relation(Sets.iniSrc.get(i).getSrcid(), Sets.iniSrc.get(j).getSrcid(),
									wgt);
							if(wgt<=45.97231728)
							{
								Sets.SEdg.add(r);
								System.out.println(r.getSink()+"; "+r.getSource()+"; "+r.getWeight());
							}
						}
//						}
//						else
//						{
//							wgt = sim + s1.getCrd()*s2.getCrd()
//									- ct*s1.getCrd()*s2.getCrd();
//						}
//						if(((s1.getDpid() == s2.getDpid())
//								|| Relation.isFR(s1.getSrcid(),s2.getSrcid()))
//								&& wgt>0)
//						{
							
						
						
					}
				}
			}
			try 
			{
	            BufferedWriter writer1 = new BufferedWriter(
						new FileWriter(new File("C:/Users/DJ/Desktop/data1121/relation/relation4.txt")));
	            for (Relation rl : Sets.SEdg) { 
	                writer1.write(rl.getSource()+","+ rl.getSink()+","+rl.getWeight() + "\n"); 
	                rid++;
	                System.out.println(rid); 
	            }
	            writer1.close();
	        } catch (Exception e) {
	            e.printStackTrace();
	        }
		}
		
		//从文本中读取现存边
		public static void getIK()
		{
			List<String> dscStrings2 = new ArrayList<String>();
			// 读取目标文件，获取点的信息，生成点的集合
			dscStrings2 = FileUtil.readFileByLines("C:/Users/DJ/Desktop/data1116/srcrl/invoke.txt");
//			List<Relation> dprl = new ArrayList<Relation>();
			for (String tmp : dscStrings2) 
			{
				String[] pntArray = tmp.split(",");// 将字符串按逗号分割
				// 将数组中0,1位赋值给点的x,y
				Relation rl = new Relation(Integer.parseInt(pntArray[0]), Integer.parseInt(pntArray[1]),0);
				Sets.Srcrl.add(rl);
			}
			System.out.println("hhhhhhhhhhhhhh");
			
			//计算边的权重
			for(Relation r:Sets.Srcrl)
			{
				System.out.println(r.getSource()+";"+r.getSink());
				Sim2Vec t =new Sim2Vec(Service.getSrcUsId(r.getSource()).getDes(),Service.getSrcUsId(r.getSink()).getDes());
				double sim = t.sim();
				double ct = getCT(Service.getSrcUsId(r.getSource()).getSt(),Service.getSrcUsId(r.getSink()).getSt());
				double wgt=((sim + Service.getSrcUsId(r.getSource()).getCrd()*Service.getSrcUsId(r.getSink()).getCrd())
					 - ct*Service.getSrcUsId(r.getSource()).getCrd()*Service.getSrcUsId(r.getSink()).getCrd()/150000)/50;
				r.setWeight(wgt);
				System.out.println("wgt: "+r.getWeight());
			}
			System.out.println("done");
			
			int rid = 1;
			//写入txt
			try 
			{
	            BufferedWriter writer1 = new BufferedWriter(
						new FileWriter(new File("C:/Users/DJ/Desktop/data1121/relation/relation2.txt")));
	            for (Relation rl : Sets.Srcrl) { 
	                writer1.write(rl.getSource()+","+ rl.getSink()+","+rl.getWeight() + "\r\n"); 
	                rid++;
	                System.out.println(rid); 
	            }
	            writer1.close();
	        } catch (Exception e) {
	            e.printStackTrace();
	        }
			System.out.println("done2");
		}
		
		private static double getCT(double a,double b)
		{
			double c = 0;
			if(a>b)
				c=b;
			else
				c=a;
			
			return c;
		}
}
